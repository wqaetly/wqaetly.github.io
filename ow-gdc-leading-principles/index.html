<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>《守望先锋》GDC 2017技术分享视频内容大纲 | 登峰造极者，殊途亦同归。</title><meta name="author" content="烟雨迷离半世殇"><meta name="copyright" content="烟雨迷离半世殇"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言 最近开坑了一个状态帧同步战斗系统视频教程，总共有5个视频  其中第一个和最后一个都好说，我自己乱吹就可以了，但是中间三个重量级比较难处理，我的计划是实时录制原GDC视频 + 分享自己的理解和思路，原视频的平均时长都在一个小时左右，如果直接莽上去很有可能在讲解的时候思路断掉，所以我需要针对他们梳理出一个大纲来理清楚讲解思路，顺带方便大家自己在学习守望先锋GDC视频的时候有针对性的去了解自己需要">
<meta property="og:type" content="article">
<meta property="og:title" content="《守望先锋》GDC 2017技术分享视频内容大纲">
<meta property="og:url" content="https://www.lfzxb.top/ow-gdc-leading-principles/index.html">
<meta property="og:site_name" content="登峰造极者，殊途亦同归。">
<meta property="og:description" content="前言 最近开坑了一个状态帧同步战斗系统视频教程，总共有5个视频  其中第一个和最后一个都好说，我自己乱吹就可以了，但是中间三个重量级比较难处理，我的计划是实时录制原GDC视频 + 分享自己的理解和思路，原视频的平均时长都在一个小时左右，如果直接莽上去很有可能在讲解的时候思路断掉，所以我需要针对他们梳理出一个大纲来理清楚讲解思路，顺带方便大家自己在学习守望先锋GDC视频的时候有针对性的去了解自己需要">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220201204924.png!webp">
<meta property="article:published_time" content="2022-02-01T00:00:00.000Z">
<meta property="article:modified_time" content="2022-02-01T00:00:00.000Z">
<meta property="article:author" content="烟雨迷离半世殇">
<meta property="article:tag" content="GamePlay">
<meta property="article:tag" content="网络同步">
<meta property="article:tag" content="文献翻译">
<meta property="article:tag" content="ECS">
<meta property="article:tag" content="GDC分享">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220201204924.png!webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "《守望先锋》GDC 2017技术分享视频内容大纲",
  "url": "https://www.lfzxb.top/ow-gdc-leading-principles/",
  "image": "https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220201204924.png!webp",
  "datePublished": "2022-02-01T00:00:00.000Z",
  "dateModified": "2022-02-01T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "烟雨迷离半世殇",
      "url": "https://www.lfzxb.top/www.lfzxb.top"
    }
  ]
}</script><link rel="shortcut icon" href="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/AvatarAndBGs/33ec68b7fe1bb742.jpg!webp"><link rel="canonical" href="https://www.lfzxb.top/ow-gdc-leading-principles/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="AhlEJ91V_L12bkwRF1ZS0BbytGCfsjqCX4GXztUluC8"><meta name="baidu-site-verification" content="iRRtEBalDiujISsN"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 8
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-7235595771604497',
  enable_page_level_ads: 'true'
});</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-XSL6D8K8G2"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-XSL6D8K8G2')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-XSL6D8K8G2', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":800,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《守望先锋》GDC 2017技术分享视频内容大纲',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/CustomIcons/iconfontformaliyun.css"><meta name="referrer" content="no-referrer-when-downgrade"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/AvatarAndBGs/33ec68b7fe1bb742.jpg!webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar" loading='lazy'></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">243</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">186</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">56</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-torii-gate"></i><span> 蓬莱仙境</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-stream"></i><span> 白驹过隙</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 包罗万象</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分朋引类</span></a></div><div class="menus_item"><a class="site-page" href="/self/"><i class="fa-fw fas fa-id-card"></i><span> 择交而友</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 一见如故</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220201204924.png!webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/blog2021/202507052331881.png!webp" alt="Logo" loading='lazy'></a><a class="nav-page-title" href="/"><span class="site-name">《守望先锋》GDC 2017技术分享视频内容大纲</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-torii-gate"></i><span> 蓬莱仙境</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-stream"></i><span> 白驹过隙</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 包罗万象</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分朋引类</span></a></div><div class="menus_item"><a class="site-page" href="/self/"><i class="fa-fw fas fa-id-card"></i><span> 择交而友</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 一见如故</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">《守望先锋》GDC 2017技术分享视频内容大纲</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-01T00:00:00.000Z" title="发表于 2022-02-01 00:00:00">2022-02-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-01T00:00:00.000Z" title="更新于 2022-02-01 00:00:00">2022-02-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/GamePlay/">GamePlay</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/GamePlay/%E6%B8%B8%E6%88%8F%E6%A1%86%E6%9E%B6/">游戏框架</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/GamePlay/ECS/">ECS</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/ow-gdc-leading-principles/#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;这篇文章已经&quot;,&quot;messageNext&quot;:&quot;天没维护了，相关内容可能已过时。&quot;,&quot;postUpdate&quot;:&quot;2022-02-01 00:00:00&quot;}" hidden=""></div><div id="postchat_postcontent"><h2 id="前言">前言</h2>
<p>最近开坑了一个状态帧同步战斗系统视频教程，总共有5个视频</p>
<p><img src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220201204924.png" alt="" loading='lazy'></p>
<p>其中第一个和最后一个都好说，我自己乱吹就可以了，但是中间三个重量级比较难处理，我的计划是实时录制原GDC视频 + 分享自己的理解和思路，原视频的平均时长都在一个小时左右，如果直接莽上去很有可能在讲解的时候思路断掉，所以我需要针对他们梳理出一个大纲来理清楚讲解思路，顺带方便大家自己在学习守望先锋GDC视频的时候有针对性的去了解自己需要了解的部分。</p>
<h2 id="《守望先锋》架构设计和网络同步"><a href="https://www.lfzxb.top/ow-gdc-gameplay-architecture-and-netcode/">《守望先锋》架构设计和网络同步</a></h2>
<h3 id="原视频链接"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2886s&amp;ab_channel=GDC">原视频链接</a></h3>
<iframe width="100%" height="315" src="https://www.youtube.com/embed/W3aieHjyNvw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<h3 id="视频内容大纲">视频内容大纲</h3>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=0s">00 : 00</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=60s">1 : 00</a> ：守望先锋游戏与开发团队介绍</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=60s">1 : 00</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=435s">7 : 15</a>：ECS概念介绍与守望先锋中使用ECS的示例</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=435s">7 : 15</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=487s">8 : 07</a>：ECS VS OOP，核心问题还是庞大工程中引用和解耦问题。传统OOP中，抛开常知的继承炼狱问题不谈，一个类既是数据又是逻辑，那么当一个类会与多个不同的类进行交互的时候，就会面对如何拆解数据和逻辑提供给相对应的类的问题，如果选择不拆，那么就需要面对越来越庞大的类，如果拆了，那么一些只有其他类才需要用到的数据和逻辑就应当被其他类在Update或者其他函数中调用，这样就会面对头疼的耦合问题。而在ECS中，通过把数据拆分成Component，并利用System和Utilities函数就可以尽可能的<code>松散化</code>这种耦合，因为一个System/Utitlites就是一个副作用很小的纯函数（这其实也是ECS的一大魅力），他会筛选出对自己关心的数据然后进行操作，后续开发迭代起来针对System/Utitlites即可。另外就是概念冲突问题，因为有些类其实并不是个对象，就只是个状态数据集合，会被很多其他的类所使用，并且在不同的类里，不同的时机，有不同的意义和抽象，那么这个数据类相关的操作放在哪里呢？放在它本身那里？似乎不太妥当，因为随着代码迭代没有办法预见有多少类会使用它，那就每个使用它的类专门为这个数据类维护调用逻辑？这似乎是正确做法，但随着开发迭代越来越多的代码填充进类里，函数里（也就是耦合越来越严重，脑力成本越来越高的时候），很容易让这个调用函数变得意义不明，而在ECS中，这个数据类的意义与抽象，完全就取决于System和Utitlites，而不是它本身，简洁明了。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=487s">8 : 07</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=670s">11 : 10</a>：数据逻辑分离的优势以及守望先锋所面临的问题，主要是跨System的调用导致的职责模糊，以及C++头文件引用导致的编译时长问题</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=670s">11 : 10</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=908s">15 : 08</a>：死亡回放系统带来的重构-Singleton组件，其实在此之前演讲人所说的单例是真正意义上的单例（全局唯一），但是在遇到死亡回放需求时就显得力不从心了，因为死亡回放的World和正常游戏的World完全是两个不同的World，如果共用一个全局的单例很容易造成状态上的错误。所以他们选择制作一些“单例”组件，值得注意的是，这里的单例组件是相对于每个World而言的，而不是全局唯一的，这样就确保了不同的World数据完全不会互相影响。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=908s">15 : 08</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=1059s">17 : 39</a>：System之间的共享行为-Utilities函数，需要注意的是，Utilities函数的本身不应当牵扯到过多的组件。它的调用也应当是简单的，少量的，因为调用的地方越多，越复杂，对于整个项目来说副作用就会越来越大。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=1059s">17 : 39</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=1322s">22 : 22</a>：Utilities的优化与示例</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=1322s">22 : 22</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=1987s">33 : 07</a>：守望先锋网络同步中的预测，回滚，FEC，网络波动的处理，以及一些细节的讲解与演示，需要注意的是，<code>守望先锋的预测回滚是只针对本地玩家的，比如我在操作英雄A，另一个人在操作英雄B，那么我就只会预测英雄A，而英雄B的行为表现则完全依赖于服务器的回包</code>。实际上在这部分视频里演讲者并没有过多的提及ECS的优势，在我的实践过程中也感觉到ECS在这部分里只是起到了比较方便的访问与操作整个项目中其他的组件（松耦合），分离数据和逻辑的作用，让预测和回滚功能开发迭代起来更加顺畅而已。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=1987s">33 : 07</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2091s">34 : 54</a>：基于StateScript的技能系统在网络同步中的预测，回滚演示，其实使用基于事件驱动的行为树可以完美还原视频中所演示的功能，事实上NKGMoba也正是这么做的</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2091s">34 : 54</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2356s">39 : 16</a>：命中判定的预测和确认，客户端只会做命中预测，而不是伤害的计算（因为有的客户端是屑，我们选择不相信它，所以根本不给他预测的机会），在这部分演讲者提及的“倒回”概念其实只是为了更加方便观众理解，因为客户端是先行于服务端的，所以本地玩家位置信息会和服务器玩家不一致，然后服务器其实是会以本地玩家在服务器上的位置进行击中判定，也就是“倒回”。之后的命中框演示意思是预测回滚这一行为的优化，因为很多时候的射击范围比较有限（就是根据本地玩家的准心与Entities过去几帧的范围集合是否有相交来判定），在这个范围外的Entity根本没有机会会被击中，所以就只选择预测这个射击范围内的Entities，这样不用预测回滚整个世界，节省了相当大的性能空间。最后的那个击中判定演示视频就是以服务器为准的判定演示。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2356s">39 : 16</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2440s">40 : 40</a>：以一个在不同Ping值下射击死神的视频，证明了高Ping值下再进行预测是完全没有必要的，因为几乎所有的预测结果都是错误的。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2440s">40 : 40</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2493s">41 : 33</a>：另一个命中预测失败的示例，这是因为玩家射击时本地状态由于网络延迟的问题和服务器上本地状态是不一致导致的，比如你开火时认为自己还站立在地面上，实际上服务器在这一帧进行判定时，自己已经在空中了，那么以原本射击角度发射的子弹肯定就打空了。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2493s">41 : 33</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2539s">42 : 19</a>：最后是一个150ping下，射击开启无敌技能的死神视频演示，在本地玩家的视角中，子弹命中时死神还没有开启无敌技能，应当有伤害，但是在服务器上进行这一帧判定时，死神其实是已经开启无敌技能的，所以本地玩家命中判定失败了。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2539s">42 : 19</a> - 结束：对ECS进行的总结，概括了ECS开发过程中需要遵循的一些准则，多次强调ECS是一个项目中各个组件模块的粘合剂，并且举了一个寻路系统的示例来说明不适用ECS的模块就不要用ECS，否则会适得其反。实际上第三幕讲到的脚本系统，技能系统和武器系统核心基本上就是基于OOP进行开发的，然后通过ECS与项目中其他组件进行交互。其实我个人想说的也是，OOP和ECS并非水火不容，一味的推崇ECS和一味的摒弃OOP都是不对的，他们都各自有自己的使用领域，像技能系统，Buff系统这种非常强内聚的系统使用OOP来开发再合适不过，因为在这些系统里的对象生命周期都比较特殊，是用ECS做起来会绕一大圈，而是用OOP则可以直接通过虚函数完成这些生命周期的开发，非常方便，具体到细节，比如一个Buff的效果是影响Entity的位置，那么就可以借助于ECS的解耦简单直接的获取到MoveComponent进行位置的修改，这正是OOP和ECS结合的大成之作。</p>
<h2 id="《守望先锋》回放技术-阵亡镜头、全场最佳和亮眼表现"><a href="https://www.lfzxb.top/ow-gdc-replay/">《守望先锋》回放技术-阵亡镜头、全场最佳和亮眼表现</a></h2>
<h3 id="原视频链接-2"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;ab_channel=GDC">原视频链接</a></h3>
<iframe width="100%" height="315" src="https://www.youtube.com/embed/W4oZq4tn57w" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=0s">00 : 00</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=381s">06 : 21</a>：简单介绍了死亡回放需求的重要性，并且举了几个例子来演示</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=381s">06 : 21</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=871s">14 : 31</a>：网络同步模型概览，详细介绍了由 <a target="_blank" rel="noopener" href="http://gafferongames.com/networking-for-game-programmers/">Glenn Fiedler概括的三种主流网络同步模型</a> ，确定性帧同步(deterministic lockstep)，常用于竞速游戏或者星际争霸2、魔兽争霸2这样的即时战略游戏；快照插值(snapshot interpolation)，FPS经典同步模型，《Quake》最早采用，后续众多FPS在之上做了改进；状态同步(state synchronization)，有点像是快照插值的改进版，也是Overwatch所采用的。其实到这里我觉得我有必要规定一下本系列教程里提及的帧同步，状态同步，状态帧同步具体是什么意思了，其实很简单，<code>帧同步就是按帧同步数据，状态同步就是数据发生变化时同步，两者结合就是状态帧同步——在数据发生变化的帧同步数据，和是不是客户端本地运算，是否使用定点数，是否服务器权威没有任何关系。</code>在这个守望先锋的分享里提及的状态同步我们默认为我们所说的状态帧同步。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=871s">14 : 31</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=1205s">20 : 05</a>：一些专业名词的释义，有一个状态同步整体流程讲解的具体示例</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=1205s">20 : 05</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=1651s">27 : 31</a>：回放系统的设计理念与一些细节，比如全量快照，脏数据的生成与处理，其实把每帧的全量快照+脏数据合并起来就是我们回放系统所需要用的数据。并且展示了一些回放系统相关API，最后演讲者提出回放系统的设计没有基于Component，而是基于Entity，基于Component固然很美好，每个System搜集所有对应Component，整理脏数据，序列化，发送，但是带宽受限的情况下，一个System的这些行为可能会影响到其余Component的脏数据发送，也就是缺少一个可以统筹全局的调用者，但既然都基于Component了，还有办法再造出一个统治者吗？是不可以的，因为逻辑完全分散在各个System中了，几乎没可能搜集完所有需要的数据，所以选择了基于Entity这一很不ECS（很OOP）的做法，简单直接有效！</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=1651s">27 : 31</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=25603s">43 : 23</a>：上一部分的内容主要是在讲述回放系统的设计，这部分则是回放系统开发实践过程中遇到的一些挑战以及相应的处理方案，包含了很多视频示例，在正式的的游戏环境中遇到的情况远比在脑海中开发回放系统所遇到的问题多得多。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W4oZq4tn57w&amp;t=25603s">43 : 23</a> - 结束：未来工作目标</p>
<h2 id="《守望先锋》网络脚本化的武器和技能系统"><a href="https://www.lfzxb.top/ow-gdc-weapon-and-skillsystem/">《守望先锋》网络脚本化的武器和技能系统</a></h2>
<h3 id="原视频链接-3"><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;ab_channel=GDC">原视频链接</a></h3>
<iframe width="100%" height="315" src="https://www.youtube.com/embed/ScyZjcjTlA4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=0s">00 : 00</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=80s">01 : 20</a>：自我介绍，StateScript脚本系统初步介绍，说明演讲的内容有哪些，包括关于Statescript的“为什么” 、“是什么”以及“如何做到的”。为什么我们决定实现这么特殊的一套系统，Statescript到底是什么？以及它背后的技术细节，这部分大约会耗时15分钟。另外会讨论网络通信需求及解决方案，包括脚本系统在Internet环境下遇到的那些限制，以及我们是怎么应对的，约30分钟。然后会分析一下这种方法的好处和挑战，这部分大约5分钟。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=80s">01 : 20</a> -  <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=154s">02 : 34</a>：为什么要开发Statescript？因为原演讲这段话非常精彩，所以我就直接复制粘贴在这里了：我们需要给“非程序员”提供开发上层逻辑的能力，因为我们知道需要创建大量的游戏逻辑，又不希望每个需求都要靠程序员手动编写解决方案。我们希望这个解决方案允许用户“定义”新的游戏状态，而不仅仅是“响应”这些状态。一般典型的游戏脚本系统都有一个相当不透明的游戏模拟过程，其中脚本也能编写逻辑以响应事先定义好的事件，通过用户自己定义变量、函数调用来微调，执行的结果最后都会消失回到黑盒状态。而我们更需要的是一个形式化的、明确的方式，使得脚本开发者（译注：scripter，下面统一用开发者）对状态和状态转移能直接地、完全地掌控。我们想要模块化的代码尽可能多地被复用，我们不会把一个特性（feature，也可译作功能）需求看作是一组功能的堆叠，而是会去设计并实现那些这个特性所需的基础功能组件。我们需要一个无痛的、稳定的方式来实现一个能够通过网络同步的状态机。手写这些代码费时费力而且容易出错，所以，最好让计算机来替你完成这些工作。另外这个方案需要能够与项目引擎的其余部分协同工作，我们也对比了很多第三方脚本引擎，但是最终还是决定自己去开发一套能嵌入到我们的游戏引擎中的脚本语言，以得到最好的结果。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=154s">02 : 34</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=523s">08 : 43</a>：Statescript是什么？Statescript是一个节点化的脚本语言，多个节点组成一个节点图，而这个节点图会在运行时根据需求实例化出来附加给目标Entity，比如一个被动技能是一个节点图，一个强大复杂的Buff效果也是一个节点图，当这些节点图附加给Entity时，这个Entity就拥有了这个技能或者被这个Buff所影响了。然后详细介绍了Statescript的几大基本节点，分别为Entry，Condition，Action，State，其中Action可以认为是一个函数调用，而State是一个可能持续多帧的状态节点，比如“等待3s”这个节点就会持续运行3s钟，此外，<code>State其实是一个个包含了很多虚函数生命周期的C++类（再次说明了OOP在这种强内聚模块中强大的开发能力）</code>。然后是Statescript的变量和属性，其中变量分为实例变量和共享变量，前者为当前Statescript独有，后者被这个Entity身上所有Statescript共享，而属性就更加抽象一些，通过<code>C++函数</code>返回一个想要的值，这个函数是可以自定义的，但两者的共性都是返回一个值。随后介绍了下Statescript的Subgraph和Container，前者用于复用现成的节点图，后者将节点划分在不同的区域用作不同的用途，比如将一些节点放置在A容器中，将另一些节点放置在B容器中，那么在A容器的节点只会在客户端执行，在B容器的节点只会在服务端执行。最后介绍了下Statescript的生命周期以及一些程序范式（顺序执行，跳转，循环）</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=523s">08 : 43</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=658s">10 : 58</a>：一个StateScript示例，玩家按住鼠标右键长达1s后，会进入第三人称视角，人物跃起。随后是一个更加复杂的例子，绿色表示节点被触发，深色表示节点正处于激活状态，透明色表示节点处于未激活状态。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=658s">10 : 58</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=1067s">17 : 47</a>：Statescript是如何实现的？讲述了Statescript系统的基础架构，并且讲解了State（值得注意的是，State提供了一种监听数据变化的功能，当其监听的数值发生变化时，其OnInternalDependencyChanged将会被调用，其实就相当于事件驱动行为树的黑板条件节点）和Variables（其实就是可以被State监听变化的变量）的工作方式，<code>如果感觉到比较难以理解，可以把Variables想象成行为树中黑板数据，把State想象成一个黑板条件节点，当监听的目标黑板变量变化后满足设定的条件时，将会执行其子节点</code>。最后介绍了一个重要的概念，即结构化数据（structured data，简写为stu）是OW团队自己创造的一套基于<code>C++</code>实现的脚本系统，包含了完善的<code>解析，反射，运行</code>功能，方便了编辑器和运行时模式下使用。最后举了一个Wait State结构化数据的例子：通过Stu编写一个Wait State节点定义，这个Stu可以被Statescript编辑器所识别（即解析，反射），并在创建Wait State时读取Stu信息来将其以节点的方式可视化出来，这个Stu文件只是定义了Wait State内容，而没有规定其是如何运行的，所以还需要用<code>C++</code>专门为这个Wait State编写其运行时逻辑（即运行）。这个结构化数据系统可能听起来有点唬人，但其实就做了<code>一套非常简单的事情，定义一个节点，解析一个节点，执行一个节点。和我们为行为树新增一个Action节点所做的事情是一样的</code></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=1067s">17 : 47</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=1187s">19 : 37</a>：如何使用Statescript来做一个网络游戏？这部分主要说明了Statescript在开发技能过程中作出的思考和取舍，1.让Statescript使用者尽量对于网络同步无感知，所以守望先锋并没有区分客户端脚本和服务端脚本。2.快速响应，即客户端可以立即做出预测行为。3.安全性，即客户端不进行决定性的结果预测，服务器权威，Statescript不论在本地做出了怎样的预测行为，一旦服务器传回的状态与本地不一致，就需要回滚到上一个与服务器状态一致的帧，然后重新模拟到当前帧。4.高效，可以应对恶劣的网络环境。5.一体化，尽可能的减少使用者对于网络同步的感知。以上5点在基于事件的行为树中可以完美的实现。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=1187s">19 : 37</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=2409s">40 : 09</a>：Statescript在网络同步中的处理方案。主要讲解了OW的网络同步模型，比较重要一点是客户端只会预测本地玩家的行为，比如我在操作英雄A，另一个人在操作英雄B，那么我就只会预测英雄A，而英雄B的行为表现则完全依赖于服务器的回包。并且对于网络同步的细节做出了更加详尽的解读，包括基础的概念如玩家输入，RTT，Statescript系统产生的DeltaData（其实在NKGMoba中一样有行为树的黑板脏数据概念与之相对应），以及客户端对于本地玩家和Remote玩家完整的预测（仅本地玩家），回滚过程。随后通过一个简单的死神开枪的示例视频演示了网络同步的具体过程，并且提到了State提供了一些函数来处理来自服务器数据包导致的回滚行为，并且提到他们<code>使用结构化镜像数据库来避免开发人员手写DeltaData搜集与发送代码，而是Statescript系统自动的进行DeltaData的收集，发送，处理工作（NKGMoba的做法与之相同，由行为树自己整理收集黑板脏数据然后进行发送和处理）</code>。再然后举了一个猎空开枪的例子，<code>例子中虽然Statescript系统正常的预测，回滚但是行为并没有正常的发生，因为这个示例中发射的子弹是抛物线类型的，而这种类型的子弹由一个Component单独管理，不归Statescript系统管理，所以如果想要在这种情况正常的回滚，就需要这个State节点自己去通知抛物线Component，让他进行回滚工作。</code></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=2409s">40 : 09</a> - <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=2640s">44 : 00</a>：这部分跳出了具体的Statescript细节，从宏观的角度来看待整个Statescript系统，包括脏数据的范围定义，Statescript Graph中节点（Stu）的解析得到需要进行收集同步的数据等。随后举了一个猎空开枪的例子让观众感受在Client和Server上同一个Statescript Graph不同的执行逻辑，服务器上执行了几乎所有节点，但在客户端只执行了寥寥几个节点（个人猜测大部分还是表现相关的节点），这不仅仅提高了客户端性能，同时还减少了网络传输的数据量，减少了带宽（因为Statescript会分析每个节点Stu定义，得出需要同步的数据）。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;t=2640s">44 : 00</a> - 结束：开始细数Statescript带来的好处以及未来需要解决的一些问题。首先好处是快速迭代新英雄，这是理所当然的，每个节点的课复用性是极强的，如果一个英雄特性不是特别的具有革命性，那么可以很大程度上利用节点库中已有的节点，然后Statescript开发者后期基本不需要书写网络同步相关代码，这被Statescript托管了。然后是后期仍要面临的一些挑战，首先是整个Statescript系统的开发工作量非常庞大，包括Stu脚本系统，调试器，运行时以及一些核心特性，他们花了3，4年来打磨这个Statescript系统。</p>
<p>（悄咪咪说一句，等状态帧同步战斗系统最后一期视频与大家见面的时候，大家应该能发现，几乎所有OW提及的Statescript特性在NKGMoba中都有对应的实现，并且完成度相当高！）</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="www.lfzxb.top">烟雨迷离半世殇</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.lfzxb.top/ow-gdc-leading-principles/">https://www.lfzxb.top/ow-gdc-leading-principles/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.lfzxb.top" target="_blank">登峰造极者，殊途亦同归。</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/GamePlay/">GamePlay</a><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%90%8C%E6%AD%A5/">网络同步</a><a class="post-meta__tags" href="/tags/%E6%96%87%E7%8C%AE%E7%BF%BB%E8%AF%91/">文献翻译</a><a class="post-meta__tags" href="/tags/ECS/">ECS</a><a class="post-meta__tags" href="/tags/GDC%E5%88%86%E4%BA%AB/">GDC分享</a></div><div class="post-share"><div class="social-share" data-image="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220201204924.png!webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>想吃fvcking crazy thrusday</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/2019/04/QQ截图20190430175314.png!webp" target="_blank"><img class="post-qr-code-img" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/2019/04/QQ截图20190430175314.png!webp" alt="微信" loading='lazy'></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/2019/04/QQ截图20190430175304.png!webp" target="_blank"><img class="post-qr-code-img" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/2019/04/QQ截图20190430175304.png!webp" alt="支付宝" loading='lazy'></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7235595771604497" data-ad-slot="9104433828"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({});</script></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/unity-textmeshpro-something/" title="基于Unity TextMeshPro的图文混排和超链接功能"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20220210185011.png!webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post" loading='lazy'><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">基于Unity TextMeshPro的图文混排和超链接功能</div></div><div class="info-2"><div class="info-item-1">前言 其实本文倒没有什么技术含量，纯纯的记录一下这个有趣的过程 环境：Unity 2020.3 正文 今天接到了要实现图文混排和超链接需求，第一反应是基于UGUI去做，然后我就去找各种开源库实现，一开始自然是去Github找了各种开源库实现，比如排行第一的：https://github.com/coding2233/TextInlineSprite 但遗憾的是自从Unity2019更改了UIText顶点构建策略之后，几乎所有网上现有的实现都失效了（反正我是基本上尝试了每一个看起来靠谱的仓库） 比如这个仓库的超链接功能  其中绿色矩形为超链接点击区域的可视化Debug，可以发现，当UIText无法显示完全所有文本时，碰撞检测是正常的，但当UIText可以完全显示所有文本时碰撞检测又是错乱的 当然不仅如此，其图文混排也是有问题的  第一个表情显示正常，第二个表情就直接乱码了，归根到底还是因为这个仓库的实现已经不适配新版本Unity的顶点构建策略了 怎么办呢？我都想硬着头皮读作者的源码然后一点点修复了，想想都觉得头疼，涉及到DSL（自定义的富文本语言）解析，顶点重计算，Sprite占位...</div></div></div></a><a class="pagination-related" href="/game-design-gems-1/" title="游戏设计精粹《一》"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20211022091824.png!webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post" loading='lazy'><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">游戏设计精粹《一》</div></div><div class="info-2"><div class="info-item-1">游戏设计精粹《总目录》 死亡搁浅：一封针对云玩家的挑战书 文章概要个人总结段落一 作为一名极富才华的游戏设计者，小岛秀夫最擅长的，就是基于能够“点火”的导火索来设计游戏，然后通过出色的设计技巧来感化他的用户——他开发生涯中最著名的那些设计例子大多都是这样实现出来的。先“玩火”，然后再“感化”，就是他成为顶级制作人的秘诀。 小岛秀夫成名作的《合金装备》，是世界上第一个鼓励玩家不要和敌人战斗也不要被发现的“潜行”游戏；他做出这个设计的原因，是因为MSX这款非主流主机相对于街机和FC贫弱的处理技能，不允许玩家和敌人同时用大量的子弹互相交战占用太多活动块资源。在《合金装备固体（MGS）》初代中，最著名的对Mantis战，则是利用了PS上记忆卡的硬件设备，以及游戏机手柄可以热插拔的新机能，让这个“拔下手柄插在另外一个手柄口里来躲避BOSS读心”的设计成了最著名的超游戏设计之一。到了MGS3，植被技术的提升让游戏内加入了大量围绕着草地和森林的生存设计，游戏主机操作系统内的时钟更是让小岛秀夫想出了“让游戏内的老人BOSS按照玩家的真实时钟老死”这种充满了吐槽点的设计。在MGS5里，一个几乎不可...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/ow-gdc-gameplay-architecture-and-netcode/" title="《守望先锋》架构设计和网络同步"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20210907113243.jpg!webp" alt="cover" loading='lazy'><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2021-02-25</div><div class="info-item-2">《守望先锋》架构设计和网络同步</div></div><div class="info-2"><div class="info-item-1">前言 《守望先锋》2017 GDC系列的分享前几年给了我很多帮助，尤其是kevinan大神的翻译更让我受益良多，如今我再想温习一下相关技术却发现很多网络上的文章图片都已经坏掉了，故在此收集网络资源发布重置版，当成备份。 重制版内容：新增多级标题，方便分块阅读，部分图片已由本人重置，一些必要的地方我录制了Gif图，方便观看。 全系列链接：《守望先锋》GDC2017技术分享精粹重制版总目录 原视频链接：https://www.youtube.com/watch?v=W3aieHjyNvw&amp;t=2886s&amp;ab_channel=GDC  ECS ECS概述 哈喽，大家好，这次的分享是关于《守望先锋》（译注：下文统一简称为Overwatch）游戏架构设计和网络部分。老规矩，手机调成静音；离开时记得填写调查问卷；换下半藏，赶紧推车！（众笑） 我是Tim Ford，是暴雪公司Overwatch开发团队老大。自从2013年夏季项目启动以来就在这个团队了。在那之前，我在《Titan》项目组，不过这次分享跟Titan没有半毛钱关系。（众笑） 这次分享的一些技术，是用来降低不停增长的...</div></div></div></a><a class="pagination-related" href="/ow-gdc-replay/" title="《守望先锋》回放技术-阵亡镜头、全场最佳和亮眼表现"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20210907121241.png!webp" alt="cover" loading='lazy'><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2021-02-24</div><div class="info-item-2">《守望先锋》回放技术-阵亡镜头、全场最佳和亮眼表现</div></div><div class="info-2"><div class="info-item-1">前言 《守望先锋》2017 GDC系列的分享前几年给了我很多帮助，尤其是kevinan大神的翻译更让我受益良多，如今我再想温习一下相关技术却发现很多网络上的文章图片都已经坏掉了，故在此收集网络资源发布重置版，当成备份。 重制版内容：新增多级标题，方便分块阅读，部分图片已由本人重置，一些必要的地方我录制了Gif图，方便观看。 全系列链接：《守望先锋》GDC2017技术分享精粹重制版总目录 原视频链接：https://www.youtube.com/watch?v=W4oZq4tn57w&amp;ab_channel=GDC  设计目标 那么回放系统的概要设计(high level design)目标是什么呢？  这次分享的标题就预示着必须给出答案，对吧？概要需求是创建一个单一的中央系统，能够支持阵亡镜头、全场最佳和亮眼表现，除此之外我们还特别需要能够生成录像文件，在开发期间可以用来做内部调试。 下面开始深入介绍每个议题。 每次玩家死亡时，游戏里就会显示临死前几秒钟的――大部分情况是以凶手（killer）视角来看的――死因及死亡过程。阵亡镜头可以帮助玩家理解他们是怎么死的，以及为什么...</div></div></div></a><a class="pagination-related" href="/ow-gdc-share-table-of-contents/" title="《守望先锋》GDC2017技术分享精粹重制版总目录"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20210908122255.jpg!webp" alt="cover" loading='lazy'><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2022-02-01</div><div class="info-item-2">《守望先锋》GDC2017技术分享精粹重制版总目录</div></div><div class="info-2"><div class="info-item-1">本文章已于2022.2.1更新，新增了每个视频的内容大纲所对应的时间点内容，以及个人对视频片段简单的内容概括  《守望先锋》2017 GDC系列的分享前几年给了我很多帮助，尤其是kevinan大神的翻译更让我受益良多，如今我再想温习一下相关技术却发现很多网络上的文章图片都已经坏掉了，故在此收集网络资源发布重置版，当成备份。 重制版内容：新增多级标题，方便分块阅读，部分图片已由本人重置，上传了武器和技能系统PDF，一些必要的地方我录制了Gif图，方便观看。 《守望先锋》GDC 2017技术分享视频内容大纲 《守望先锋》架构设计和网络同步 原视频链接  《守望先锋》回放技术-阵亡镜头、全场最佳和亮眼表现 原视频链接  《守望先锋》网络脚本化的武器和技能系统 原视频链接  </div></div></div></a><a class="pagination-related" href="/ow-gdc-weapon-and-skillsystem/" title="《守望先锋》网络脚本化的武器和技能系统"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_3/20210907115955.jpg!webp" alt="cover" loading='lazy'><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2021-02-25</div><div class="info-item-2">《守望先锋》网络脚本化的武器和技能系统</div></div><div class="info-2"><div class="info-item-1">前言 《守望先锋》2017 GDC系列的分享前几年给了我很多帮助，尤其是kevinan大神的翻译更让我受益良多，如今我再想温习一下相关技术却发现很多网络上的文章图片都已经坏掉了，故在此收集网络资源发布重置版，当成备份。 重制版内容：新增多级标题，方便分块阅读，部分图片已由本人重置，一些必要的地方我录制了Gif图，方便观看。 全系列链接：《守望先锋》GDC2017技术分享精粹重制版总目录 原PDF链接：本文部分图片如果想查看高清大图，可前往 《守望先锋》中网络脚本化的武器和技能系统 PDF 下载PDF 原视频链接：https://www.youtube.com/watch?v=ScyZjcjTlA4&amp;ab_channel=GDC  嗨，大家好，我叫 Dan Reed, 是暴雪娱乐的游戏工程师（gameplay engineer，译注：游戏机制工程师，或者游戏工程师，都可以），今天主要跟大家分享《守望先锋》（后面统一用Overwatch表示）中的网络脚本化的武器和技能系统。 那么这里先简单介绍下我在Overwatch中的主要工作。   Statescript脚本系统，这也是今...</div></div></div></a><a class="pagination-related" href="/air-distortion-based-on-pp-in-urp/" title="URP下基于后处理的热空气扭曲效果"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/blog2021/20210907004036.png!webp" alt="cover" loading='lazy'><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2021-02-20</div><div class="info-item-2">URP下基于后处理的热空气扭曲效果</div></div><div class="info-2"><div class="info-item-1">前言 前几天在网上看到一位大神的 Unity Shader-热空气扭曲效果 文章，感觉应该是个常见的效果，所以准备在URP里实现一下，正好再次深入使用一下URP，期间也遇到了一些匪夷所思的坑，也会在文章中说明。 原文中的全屏扭曲和基于GrabPass的方式都省略不谈，这里来用URP实现一下基于后处理的热空气扭曲。 环境 URP版本：7.3.1 Unity版本：2019.4.8f1 正文 原文中的实现核心思路是在需要扭曲的地方摆放一个面片，然后将这个面片渲染到一张RenderTexture上作为Mask，后处理的时候以Mask为基准决定ColorTexture哪些地方需要扭曲，然后对一张Noise图进行采样，对目标像素做偏移，达到扭曲的效果。 仔细分析后发现其实就一个难点，就是如何在URP下将物体渲染到一个RenderTexture上。 恰巧前阵子 研究战争迷雾 的时候看到了这篇文章：流朔 -【Unity URP】以Render Feature实现卡通渲染中的刘海投影 ，其中就有将物体渲染到RenderTexture的相关操作，这样一来就没有问题了，开搞。 首先创建一个Render...</div></div></div></a><a class="pagination-related" href="/context-steering-behavior-driven-steering-at-the-macro-scale/" title="（译）上下文转向行为驱动的AI移动策略（Context Steering）"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/blog2021/202302012311835.png" alt="cover" loading='lazy'><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-02-02</div><div class="info-item-2">（译）上下文转向行为驱动的AI移动策略（Context Steering）</div></div><div class="info-2"><div class="info-item-1">本文是对GameAIPro2_Chapter18_Context_Steering_Behavior-Driven_Steering_at_the_Macro_Scale 进行的中文翻译 译文 介绍 在游戏行业中，转向行为（Steering Behaviour）是非常普遍的。他们之所以这么流行，是因为其只需要使用简单组件就可以快速实现核心功能。 然而，转向行为并不适合用于某些类型的游戏。当玩家能够挑选并监控单个实体时，避免碰撞和自然的移动就变得非常重要。为了实现这一目标可能会导致行为组件的膨胀并变得紧耦合，实体运动逻辑也会变得脆弱和难以维护。 在本章中，我们将概述如何识别那些转向行为不太适合的游戏，并提出一种针对这些问题的新方法，它被称之为上下文转向行为（Context Steering）。上下文转向行为（Context Steering Monobehaviours）是小巧的和无状态的（StateLess），并提供任何行为本身所期望的运动约束。当上下文转向行为用于取代游戏F1 2011上的原转向行为时，代码库减少了4000行，但AI在避免碰撞、超车和执行其他有趣的行为方面表现得...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%8A%E5%AE%88%E6%9C%9B%E5%85%88%E9%94%8B%E3%80%8B%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E7%BD%91%E7%BB%9C%E5%90%8C%E6%AD%A5"><span class="toc-number">2.</span> <span class="toc-text">《守望先锋》架构设计和网络同步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E8%A7%86%E9%A2%91%E9%93%BE%E6%8E%A5"><span class="toc-number">2.1.</span> <span class="toc-text">原视频链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%86%85%E5%AE%B9%E5%A4%A7%E7%BA%B2"><span class="toc-number">2.2.</span> <span class="toc-text">视频内容大纲</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%8A%E5%AE%88%E6%9C%9B%E5%85%88%E9%94%8B%E3%80%8B%E5%9B%9E%E6%94%BE%E6%8A%80%E6%9C%AF-%E9%98%B5%E4%BA%A1%E9%95%9C%E5%A4%B4%E3%80%81%E5%85%A8%E5%9C%BA%E6%9C%80%E4%BD%B3%E5%92%8C%E4%BA%AE%E7%9C%BC%E8%A1%A8%E7%8E%B0"><span class="toc-number">3.</span> <span class="toc-text">《守望先锋》回放技术-阵亡镜头、全场最佳和亮眼表现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E8%A7%86%E9%A2%91%E9%93%BE%E6%8E%A5-2"><span class="toc-number">3.1.</span> <span class="toc-text">原视频链接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%8A%E5%AE%88%E6%9C%9B%E5%85%88%E9%94%8B%E3%80%8B%E7%BD%91%E7%BB%9C%E8%84%9A%E6%9C%AC%E5%8C%96%E7%9A%84%E6%AD%A6%E5%99%A8%E5%92%8C%E6%8A%80%E8%83%BD%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.</span> <span class="toc-text">《守望先锋》网络脚本化的武器和技能系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E8%A7%86%E9%A2%91%E9%93%BE%E6%8E%A5-3"><span class="toc-number">4.1.</span> <span class="toc-text">原视频链接</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url(https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/blog2021/20210912135042.png!webp);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">©&nbsp;2025 By 烟雨迷离半世殇</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div><div class="footer_custom_text">2018-2025 lfzxb.top版权所有<br><span id="realtime_duration"></span><br><a href="https://beian.miit.gov.cn" target="_blank">苏ICP备19003389号-1</a><br><img src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/blog2021/20210912135040.png!webp" alt="公网安备字" loading='lazy'><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32032102000159" target="_blank">苏公网安备 32032102000159号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="fluid-control-btn" type="button" title="流体模拟控制台"><i class="fas fa-water"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: '508db6cacf197b7363d1',
      clientSecret: '2882a0b135eaa72b3ab256e37249c50733ce9e91',
      repo: 'wqaetly',
      owner: 'wqaetly',
      admin: ['wqaetly'],
      updateCountCallback: commentCount,
      proxy: "https://strong-caramel-969805.netlify.app/github_access_token",
      ...option,
      id: isShuoshuo ? path : (option && option.id) || 'ebb4204912fc962fd48d417f839bb17c'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script src="https://cdn.jsdelivr.net/npm/dayjs/dayjs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/dayjs/plugin/duration.min.js"></script><script src="/js/realtime.js"></script><script>window.FLUID_CONFIG={enable:true,mobile:false,z_index:-1,SIM_RESOLUTION:128,DYE_RESOLUTION:1024,DENSITY_DISSIPATION:1,VELOCITY_DISSIPATION:0.2,PRESSURE:0.8,PRESSURE_ITERATIONS:20,CURL:30,SPLAT_RADIUS:0.25,SPLAT_FORCE:6000,SHADING:true,COLORFUL:true,COLOR_UPDATE_SPEED:10,PAUSED:false,BACK_COLOR:{r:0,g:0,b:0},TRANSPARENT:false,BLOOM:true,BLOOM_ITERATIONS:8,BLOOM_RESOLUTION:256,BLOOM_INTENSITY:0.8,BLOOM_THRESHOLD:0.6,BLOOM_SOFT_KNEE:0.7,SUNRAYS:true,SUNRAYS_RESOLUTION:196,SUNRAYS_WEIGHT:1.0,interaction:{enable:true}};</script><script src="/js/fluid-simulation/dat.gui.min.js"></script><script src="/js/fluid-simulation/fluid-core.js"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="docsearch-wrap"><div id="docsearch" style="display:none"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css/dist/style.min.css"><script src="https://cdn.jsdelivr.net/npm/@docsearch/js/dist/umd/index.min.js"></script><script>(() => {
  docsearch(Object.assign({
    appId: 'D3U85CARGJ',
    apiKey: '3edfc5bada9a140d5a4126085596f99c',
    indexName: 'blogsearch',
    container: '#docsearch',
    placeholder: '搜索文章',
  }, null))

  const handleClick = () => {
    document.querySelector('.DocSearch-Button').click()
  }

  const searchClickFn = () => {
    btf.addEventListenerPjax(document.querySelector('#search-button > .search'), 'click', handleClick)
  }

  searchClickFn()
  window.addEventListener('pjax:complete', searchClickFn)
})()</script></div></div>
    <link rel="stylesheet" href="https://ai.tianli0.top/static/public/postChatUser_summary.min.css">
    <script>
        let tianliGPT_key = 'S-TY6LYYCZMYV6UADE';
        let tianliGPT_postSelector = '#article-container';
        let tianliGPT_Title = '烟雨迷离半世殇（人机版）为您总结文章';
        let tianliGPT_postURL = 'https://www.lfzxb.top/*/';
        let tianliGPT_blacklist = '';
        let tianliGPT_wordLimit = '50000';
        let tianliGPT_typingAnimate = false;
        let tianliGPT_theme = 'menghuan';
        var postChatConfig = {
          backgroundColor: "#3e86f6",
          bottom: "16px",
          left: "16px",
          fill: "#FFFFFF",
          width: "44px",
          frameWidth: "375px",
          frameHeight: "600px",
          defaultInput: false,
          upLoadWeb: true,
          showInviteLink: true,
          userTitle: "烟雨迷离半世殇（人机版）为您服务",
          userDesc: "在下定知无不言",
          addButton: true,
          beginningText: "这篇文章介绍了",
          userIcon: "https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/AvatarAndBGs/33ec68b7fe1bb742.jpg!webp",
          userMode: "magic",
          defaultChatQuestions: ["你好","你是谁"],
          defaultSearchQuestions: ["视频压缩","设计"]
        };
    </script>
    <script data-postchat_key="S-TY6LYYCZMYV6UADE" src="https://ai.tianli0.top/static/public/postChatUser_summary.min.js"></script>
  </body></html>